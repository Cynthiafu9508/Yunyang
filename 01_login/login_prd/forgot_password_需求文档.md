# 忘记密码功能产品需求文档 (PRD)

## 📋 文档信息
- **文档版本**: v0.3
- **创建日期**: 2025年8月27日
- **最后更新**: 2025年10月18日
- **页面名称**: 忘记密码页面（3个页面流程）
- **原型文件**: forgot_password.html, forgot_password_verify.html, forgot_password_reset.html

---

## 🏗️ 页面层级

```
密码登录页面
    ↓ 点击"忘记密码？"
忘记密码页面 (手机号输入)
    ↓ 发送验证码
验证码验证页面
    ↓ 验证成功
密码重置页面
    ↓ 重置成功
登录页面
```

---

## 🏗️ 页面结构

```
忘记密码流程（3个页面）

1. 忘记密码页面
├── 状态栏 (系统级)
├── 导航栏（返回按钮）
├── 页面标题 "忘记密码"
├── 说明文字
├── 手机号输入（+86，11位）
└── 发送验证码按钮

2. 验证码验证页面
├── 状态栏 (系统级)
├── 导航栏（返回按钮）
├── 页面标题 "验证身份"
├── 说明文字（显示手机号）
├── 验证码输入（6位数字）
├── 重新发送按钮
└── 提示文字

3. 密码重置页面
├── 状态栏 (系统级)
├── 导航栏（返回按钮）
├── 页面标题 "设置新密码"
├── 说明文字
├── 新密码输入（最少6位，可显示/隐藏）
├── 密码强度指示器
├── 确认密码输入
└── 确认修改按钮
```

---

## ⚙️ 功能需求详述

忘记密码功能通过手机号验证码验证身份后重置密码，包含5个核心功能：手机号输入、验证码发送、验证码验证、密码重置、成功反馈。

### 1. 手机号输入功能 (F4.1)
- 国家代码+86，不可更改
- 11位数字，只能输入数字，超出自动截断
- 占位符："请输入手机号"
- 说明文字："请输入您注册时使用的手机号，我们将发送验证码帮您重置密码"
- 获得焦点时有视觉反馈
- 格式错误提示："手机号格式不正确，请输入11位手机号"
- 手机号必须已注册

---

### 2. 发送验证码功能 (F4.2)
- 按钮文字："发送验证码"
- 60秒倒计时，显示"重新发送 (XXs)"
- 前置条件：必须先输入11位手机号
- 未输入手机号提示："请先输入手机号"
- 手机号格式错误提示："手机号格式不正确，请输入11位手机号"
- 发送成功自动跳转到验证码页面 (forgot_password_verify.html)
- 限流：1分钟1次，1小时最多5次
- 验证码有效期5分钟

---

### 3. 验证码验证功能 (F4.3)
- 6个独立数字输入框
- 只能输入数字，自动跳转到下一个输入框
- 支持删除操作
- 说明文字："验证码已发送至 +86 XXX ***** XXX"（部分隐藏手机号）
- 提示文字："验证码有效期为5分钟，请及时输入"
- 输入完6位后自动验证
- 验证成功自动跳转到密码重置页面 (forgot_password_reset.html)
- 验证失败显示错误提示
- 重新发送按钮60秒倒计时
- 连续错误3次锁定5分钟

---

### 4. 密码重置功能 (F4.4)
- 新密码输入框，默认隐藏内容
- 确认密码输入框，默认隐藏内容
- 眼睛图标切换显示/隐藏密码
- 密码强度指示器：弱（红色）、中（橙色）、强（绿色）
- 说明文字："请设置您的新密码，建议使用字母、数字和符号的组合"
- 占位符："请输入新密码" / "请再次输入密码"
- 最少6位，实时检测密码强度
- 两次密码不一致提示："两次输入的密码不一致"
- 密码长度不足提示："密码长度不能少于6位"
- 按钮文字："确认修改"
- 修改成功显示成功弹窗

---

### 5. 成功反馈功能 (F4.5)
- 成功弹窗显示绿色对勾图标
- 成功文字："密码重置成功！"
- "立即登录"按钮
- 点击跳转到登录页面 (login.html)
- 修改成功后旧密码失效

---

## 🎨 UI设计规范

所有页面视觉设计（包括颜色、字体、布局、间距、圆角、阴影、动画等）统一由设计师设计。

---

## ✅ 测试与验收标准

### 功能完整性
- [ ] 5个核心功能全部实现
- [ ] 3个页面流程顺畅
- [ ] 手机号11位验证正确
- [ ] 验证码发送倒计时正常（60秒）
- [ ] 限流规则生效（1分钟1次，1小时5次）
- [ ] 6位验证码验证正确
- [ ] 验证码自动跳转输入框
- [ ] 验证成功自动跳转密码重置页面
- [ ] 密码强度实时检测（弱/中/强）
- [ ] 密码6位验证正确
- [ ] 两次密码一致性验证正确
- [ ] 修改成功显示弹窗，跳转登录页面 (login.html)
- [ ] 连续错误3次锁定5分钟

### 交互体验
- [ ] 输入框焦点反馈正常
- [ ] 错误提示清晰准确
- [ ] 加载状态显示正确
- [ ] 页面间跳转流畅
- [ ] 返回按钮功能正常

---

## 📝 更新记录

| 版本 | 日期 | 更新内容 | 负责人 |
|------|------|----------|--------|
| v0.1 | 2025-08-27 | 初始版本创建 | Cynthia |
| v0.2 | 2025-08-27 | 完善功能需求，增加UI设计建议 | Cynthia |
| v0.3 | 2025-10-18 | 精简功能描述语言，统一样式设计说明，突出重点功能 | Cynthia |

---

**文档维护**: 云养产品团队  
**最后更新**: 2025年10月18日  
**版本**: v0.3
