# 云养APP - HTML原型 v2.1

## 📱 项目简介

云养是一个梦女风格的虚拟人物陪伴APP，用户可以通过上传照片创建专属的AI虚拟伙伴，进行日常聊天互动。应用采用iPhone 16模拟器展示，具有完整的商业化体系，包括每日签到、心跳值消耗、会员订阅等功能。

## ✨ 核心功能

### 🎯 v2.0 主要更新

#### 1. 每日签到系统
- 用户每日首次登录自动赠送50点心跳值
- 自动弹窗提示签到成功
- 24点自动清零，次日可再次领取
- 优先消耗每日赠送心跳值

#### 2. 商业化体系
- **会员订阅**：周度会员（¥9.9）、月度会员（¥19.9）
- **心动充值**：¥3/¥6/¥12三个固定档位
- **心跳值消耗**：每次聊天消耗1点心跳值
- **创建额度**：初始赠送1个，充值获得更多

#### 3. 数据全局打通
- 所有页面通过localStorage共享数据
- 心跳值实时同步显示
- 创建人物数量动态更新
- 联系人列表与已创建人物绑定

## 📁 项目结构

```
html_prototypes1/
├── 01_login/                          # 登录模块
│   ├── html/
│   │   ├── login.html                 # 主登录页面
│   │   ├── password_login.html        # 密码登录
│   │   ├── forgot_password.html       # 忘记密码
│   │   ├── forgot_password_verify.html # 验证码验证
│   │   └── forgot_password_reset.html  # 重置密码
│   └── prd/
│       ├── login_需求文档.md
│       ├── password_login_需求文档.md
│       └── forgot_password_需求文档.md
│
├── 02_create_character/               # 创建人物模块
│   ├── html/
│   │   ├── upload.html                # 上传照片页面
│   │   └── character-profile.html     # 人物档案页面
│   └── prd/
│       ├── upload_需求文档.md
│       └── character-profile_需求文档.md (v2.1)
│
├── 03_contacts/                       # 联系人模块
│   ├── html/
│   │   └── contacts.html              # 联系人列表
│   └── prd/
│       └── contacts_需求文档.md
│
├── 04_chat/                           # 聊天模块
│   ├── html/
│   │   └── chat.html                  # 聊天详情页
│   └── prd/
│       └── chat_需求文档.md (v2.0)
│
├── 05_profile/                        # 个人中心模块
│   ├── html/
│   │   └── profile.html               # 个人中心页
│   └── prd/
│       └── profile_需求文档.md (v2.0)
│
├── 06_recharge/                       # 充值模块 (v2.0新增)
│   ├── html/
│   │   └── recharge.html              # 充值中心页
│   └── prd/
│       └── recharge_需求文档.md (v1.0)
│
├── all_html/                          # 所有HTML文件集合
│   ├── login.html
│   ├── password_login.html
│   ├── forgot_password.html
│   ├── forgot_password_verify.html
│   ├── forgot_password_reset.html
│   ├── homepage.html
│   ├── upload.html
│   ├── character-profile.html
│   ├── contacts.html
│   ├── chat.html
│   ├── profile.html
│   ├── recharge.html (v2.0新增)
│   └── 功能更新说明_v2.0.md
│
├── README.md                          # 本文件
└── 功能更新说明_v2.0.md              # v2.0详细更新说明
```

## 🎨 设计特色

- **梦女风格**: 渐变粉紫色背景（#f0e5ff → #d9c6e0）
- **iPhone 16模拟**: 真实还原iPhone 16尺寸（393×852px）
- **毛玻璃效果**: 卡片使用半透明背景+blur效果
- **圆润设计**: 统一的圆角和柔和阴影
- **动画效果**: 心跳动画、点击反馈、平滑过渡

## 🚀 完整功能列表

### 1. 用户认证系统
- ✅ 手机号登录
- ✅ 密码登录
- ✅ 忘记密码流程（验证码验证→重置密码）
- ✅ 退出登录

### 2. 虚拟人物创建
- ✅ 上传照片
- ✅ AI智能生成人物信息
- ✅ 人物档案编辑（昵称、出生日期、职业背景、性格特征、说话风格）
- ✅ 创建额度检查
- ✅ 额度不足引导充值

### 3. 聊天功能
- ✅ 实时消息收发（仅文字）
- ✅ AI智能回复
- ✅ 正在输入提示
- ✅ 心跳值实时显示
- ✅ 每条消息消耗1点心跳值
- ✅ 心跳值不足提示充值

### 4. 联系人管理
- ✅ 联系人列表动态渲染
- ✅ 与已创建人物数据绑定
- ✅ 按首字母分组显示
- ✅ 点击进入聊天
- ✅ 空状态提示

### 5. 个人中心
- ✅ 用户资产展示（心跳值、已创建人物）
- ✅ VIP会员状态和到期时间
- ✅ 每日自动签到（首次登录弹窗）
- ✅ 订阅充值入口
- ✅ 我的人物管理
- ✅ 联系我们
- ✅ 隐私政策与使用条款
- ✅ 退出登录

### 6. 充值中心 (v2.0新增)
- ✅ 会员套餐（周度/月度）
- ✅ 心动充值（¥3/¥6/¥12）
- ✅ 当前余额展示
- ✅ Tab切换选择
- ✅ 充值成功自动返回

## 💾 数据结构设计

### localStorage数据项

```javascript
{
  // 用户认证
  userToken: "xxx",
  userInfo: {...},
  
  // 资产数据
  heartBalance: 2350,              // 永久心跳值
  dailyHeartBalance: 50,           // 每日赠送（24点清零）
  createQuota: 10,                 // 剩余人物创建额度
  
  // 人物数据
  characterList: [                 // 已创建人物列表
    {
      id: "alice_001",
      name: "小仙女Alice",
      avatar: "A",
      birthday: "1998-05-20",
      occupation: "学生",
      personality: "温柔、善良",
      interests: "阅读、旅行",
      speakingStyle: "温和亲切",
      createTime: "2025-10-16T..."
    }
  ],
  characterCount: 1,               // 已创建人物数量
  
  // 签到数据
  lastSignInDate: "Wed Oct 16 2025" // 最后签到日期
}
```

## 🔄 核心业务流程

### 每日签到流程
```
用户首次登录
    ↓
homepage.html或profile.html加载
    ↓
检查lastSignInDate ≠ 今天?
    ↓ 是
自动赠送50心跳值
弹窗提示签到成功
更新lastSignInDate
    ↓
24点后日期变化可再次领取
```

### 聊天消耗流程
```
用户发送消息
    ↓
检查心跳值余额 ≥ 1?
    ↓ 否
弹窗提示："心跳值不足，是否前往充值？"
    ↓ 是
优先消耗每日赠送心跳值
每日赠送不足则消耗永久心跳值
更新localStorage和页面显示
发送消息成功
```

### 创建人物流程
```
upload.html上传照片
    ↓
AI生成人物信息
    ↓
character-profile.html编辑
    ↓
点击"创建人物"
    ↓
检查createQuota > 0?
    ↓ 否
弹窗提示："创建额度不足，是否前往充值？"
    ↓ 是
消耗1个额度
保存到characterList
跳转到联系人/聊天页面
```

### 充值流程
```
点击"订阅充值"或心跳值不足提示
    ↓
跳转recharge.html
    ↓
选择会员套餐或心动充值
    ↓
确认支付
    ↓
heartBalance增加（永久心跳值）
createQuota增加（创建额度）
    ↓
2秒后返回个人中心
所有页面余额自动同步
```

## 💰 定价策略

### 会员套餐
| 套餐 | 价格 | 心跳值 | 创建额度 | VIP时长 |
|------|------|--------|----------|---------|
| 周度 | ¥9.9 | 1000 | 3个 | 7天 |
| 月度 | ¥19.9 | 2500 | 7个 | 30天 |

### 心动充值
| 档位 | 价格 | 心跳值 | 创建额度 |
|------|------|--------|----------|
| 小额 | ¥3 | 200 | 1个 |
| 中档 | ¥6 | 500 | 3个 |
| 大额 | ¥12 | 1200 | 7个 |

### 初始赠送
- 注册用户：1个人物创建额度
- 每日签到：50点心跳值（24点清零）

## 🔧 本地运行

### 快速开始
```bash
# 1. 克隆项目
git clone https://github.com/Cynthiafu9508/Yunyang.git

# 2. 进入目录
cd Yunyang/all_html

# 3. 打开任意HTML文件
# 推荐从login.html开始体验完整流程
```

### 推荐浏览器
- Chrome (推荐)
- Safari
- Edge
- 建议使用移动端模式或开发者工具查看

### 测试流程建议
```
1. login.html → 体验登录流程
2. homepage.html → 查看聊天列表，触发每日签到
3. upload.html → 上传照片创建人物
4. character-profile.html → 编辑人物信息（检查创建额度）
5. contacts.html → 查看已创建人物列表
6. chat.html → 与人物聊天（消耗心跳值）
7. profile.html → 查看资产和会员状态
8. recharge.html → 充值心跳值和创建额度
```

## 🎯 目标用户

### 主要用户群体
- **18-35岁女性用户**: 寻求情感陪伴和治愈体验
- **独居青年**: 需要日常聊天和情感支持
- **二次元爱好者**: 喜欢虚拟人物互动

### 使用场景
- 睡前陪伴（晚上9-11点）
- 通勤路上的碎片时间
- 工作间隙的放松
- 情绪低落时的安慰

## 📊 页面功能对照表

| 页面 | 功能 | 数据读取 | 数据更新 |
|------|------|----------|----------|
| login.html | 用户登录 | - | userToken |
| homepage.html | 聊天列表、每日签到 | characterList | dailyHeartBalance |
| upload.html | 上传照片 | - | - |
| character-profile.html | 编辑人物、创建检查 | createQuota | characterList, createQuota |
| contacts.html | 联系人列表 | characterList | - |
| chat.html | 聊天、消耗心跳值 | heartBalance, dailyHeartBalance | heartBalance, dailyHeartBalance |
| profile.html | 资产展示、自动签到 | 所有数据 | dailyHeartBalance |
| recharge.html | 充值 | heartBalance, createQuota | heartBalance, createQuota |

## 🛠️ 技术特点

- **纯前端实现**: HTML + CSS + JavaScript，无框架依赖
- **localStorage存储**: 完整的本地数据持久化
- **响应式设计**: 移动端优先，iPhone 16尺寸模拟
- **数据联动**: 跨页面数据实时同步
- **UTF-8编码**: 完美支持中文

## 🎨 设计规范

### 色彩系统
- **主背景**: 渐变粉紫色 (#f0e5ff → #d9c6e0)
- **卡片背景**: 白色半透明 rgba(255, 255, 255, 0.9)
- **强调色**: 粉红色渐变 (#ff9a9e → #fecfef)
- **紫色渐变**: (#667eea → #764ba2)
- **主文字**: 深紫色 #6a4c93
- **辅助文字**: 灰紫色 #a991b8

### 字体规范
- **系统字体**: -apple-system, BlinkMacSystemFont
- **标题**: 18-20px, 粗体
- **正文**: 14-16px, 常规
- **辅助**: 12-13px, 常规

### 圆角规范
- **大卡片**: 20px
- **按钮**: 25px
- **小元素**: 12-15px

## 💡 核心业务逻辑

### 1. 心跳值系统
**获取方式**:
- 每日签到：50点（24点清零）
- 充值购买：永久有效

**消耗规则**:
- 每次发送消息：-1点
- 消耗顺序：每日赠送 → 永久心跳值

**不足处理**:
- 弹窗提示并引导充值
- 阻止发送消息直到充值

### 2. 创建额度系统
**获取方式**:
- 初始注册：1个
- 充值获得：1-7个不等

**消耗规则**:
- 每创建1个人物：-1个额度

**不足处理**:
- 弹窗提示所有充值选项
- 引导跳转到recharge.html

### 3. 数据同步机制
**实时同步页面**:
- profile.html：显示总余额和人物数
- chat.html：显示心跳值，消耗后更新
- contacts.html：显示已创建人物列表
- recharge.html：显示余额，充值后更新

**同步时机**:
- 页面加载时：从localStorage读取
- 数据变更后：立即写入localStorage
- 跨页面跳转：目标页面自动读取最新数据

## 📱 页面预览

### 登录页面
![iPhone 16模拟器展示，梦女风格渐变背景，浮动装饰元素]

### 聊天页面
![消息气泡设计，右上角心跳值显示，底部文字输入框]

### 充值中心
![会员套餐和心动充值，清晰的权益展示，粉色渐变按钮]

### 个人中心
![资产卡片展示，VIP会员标识，功能菜单]

## 🧪 测试要点

### 每日签到测试
- [ ] 每日首次登录弹窗
- [ ] 同一天只弹一次
- [ ] 24点后日期变化可再次领取

### 心跳值消耗测试
- [ ] 发送消息消耗1点
- [ ] 优先消耗每日赠送
- [ ] 不足时提示充值
- [ ] 跨页面显示一致

### 创建额度测试
- [ ] 初始用户有1个免费额度
- [ ] 创建人物消耗1个
- [ ] 额度不足时提示
- [ ] 充值后额度增加

### 数据同步测试
- [ ] 充值后所有页面余额同步
- [ ] 创建人物后联系人列表更新
- [ ] 心跳值消耗实时反映

## 📄 需求文档说明

### 文档结构（v0.3统一格式）
所有需求文档已优化为统一格式，包含：
1. 📋 文档信息
2. 🏗️ 页面结构（树状图）
3. ⚙️ 功能需求详述（精简描述）
4. 🎨 UI设计规范
5. ✅ 测试与验收标准（功能完整性+交互体验）
6. 📝 更新记录

### 文档特点
- **语言精简**：突出重点，避免冗余
- **格式统一**：所有文档版本v0.3
- **保留核心**：商业化逻辑、数据存储方案、AI Prompt
- **删除通用**：页面概述、目标用户等通用章节

### 需求文档列表（10个）
1. login_需求文档.md - 登录页面
2. homepage_需求文档.md - 聊天主页
3. password_login_需求文档.md - 密码登录
4. forgot_password_需求文档.md - 忘记密码
5. upload_需求文档.md - 上传照片
6. character-profile_需求文档.md - 人物档案（含AI Prompt）
7. contacts_需求文档.md - 联系人
8. chat_需求文档.md - 聊天详情
9. profile_需求文档.md - 个人中心
10. recharge_需求文档.md - 充值中心

## 🔗 关键页面跳转关系

```
login.html
    ↓ 登录成功
homepage.html (每日签到弹窗)
    ↓ 点击联系人
contacts.html (显示已创建人物)
    ↓ 点击人物
chat.html (聊天消耗心跳值)
    ↓ 心跳值不足
recharge.html (充值)
    ↓ 充值成功
profile.html (查看余额)
    ↓ 点击"我的人物"
contacts.html
```

## 🚧 后续规划

### v2.1 计划
- [ ] 完善更换头像功能（图片上传）
- [ ] 消费记录查询
- [ ] VIP特权详情页
- [ ] 账号安全设置

### v2.2 计划
- [ ] 签到日历
- [ ] 成就系统
- [ ] 好友邀请奖励
- [ ] 分享功能

### v3.0 计划
- [ ] 语音消息支持
- [ ] 人物形象自定义
- [ ] 多人物聊天室
- [ ] 社交功能

## 📞 联系方式

- **客服邮箱**: 17621792630@163.com
- **官方客服微信**: 17621792630
- **官方小红书账号**: Dokidoki官方号
- **工作时间**: 9:00-18:00
- **GitHub**: https://github.com/Cynthiafu9508/Yunyang

## 📝 更新日志

### v2.1 (2025-10-18)
- ✅ 优化所有需求文档（10个）
- ✅ 统一文档格式和版本号v0.3
- ✅ 精简语言，突出重点
- ✅ 净精简2312行文档内容（约70%）
- ✅ 合并测试用例与验收标准
- ✅ 保留核心业务逻辑和AI Prompt

### v2.0 (2025-10-16)
- ✅ 新增每日签到系统
- ✅ 新增充值中心页面
- ✅ 完善商业化体系
- ✅ 聊天添加心跳值消耗
- ✅ 创建人物添加额度检查
- ✅ 联系人绑定人物数据
- ✅ 所有页面数据打通

### v1.0 (2025-08-24)
- 初始版本
- 基础登录流程
- 基础聊天功能
- 人物创建功能

---

## 📌 重要说明

### 商业化功能 🔥
1. **聊天消耗心跳值**: 每次发送消息消耗1点心跳值，心跳值不足时引导充值
2. **创建人物需要额度**: 初始免费1个，超出后需要充值获得创建额度
3. **数据完全打通**: 所有页面通过localStorage共享数据，实时同步

### 注意事项
- 本项目为前端原型，用于演示和测试
- 实际部署需要集成后端API和支付系统
- 所有充值功能为模拟实现
- localStorage数据在浏览器中持久化

---

**项目版本**: v2.1  
**最后更新**: 2025年10月18日  
**维护者**: 云养产品团队  
**仓库地址**: https://github.com/Cynthiafu9508/Yunyang
