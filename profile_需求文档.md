# 个人中心页面功能需求规格说明书

## 📖 文档信息
- **文档版本**: v2.0
- **更新日期**: 2025年10月16日
- **页面名称**: 个人中心页面 (profile.html)
- **原型文件**: profile.html
- **负责模块**: 用户信息与设置管理

---

## 🎯 页面概述

### 产品定位
个人中心页面是云养APP的用户管理中心，展示用户资产、会员状态、提供充值入口和基本设置功能。

### 核心价值
- **资产展示**: 实时显示用户心跳值余额和已创建人物数量
- **会员管理**: 展示VIP会员状态和到期时间
- **快速充值**: 提供便捷的订阅充值入口
- **人物管理**: 查看已创建的虚拟人物

---

## 👥 目标用户

### 主要用户群体
1. **活跃用户**
   - 需要查看心跳值余额
   - 管理已创建的虚拟人物
   
2. **付费用户**
   - 查看会员状态和到期时间
   - 进行订阅或充值操作

3. **新用户**
   - 了解每日签到奖励
   - 首次体验充值功能

---

## 🏗️ 功能架构

### 页面结构层次
```
个人中心页面
├── 导航栏
│   └── 页面标题 "我"
├── 用户信息卡片
│   ├── 头像区域
│   │   ├── 用户头像（可点击修改）
│   │   └── 编辑图标
│   ├── 基本信息
│   │   ├── 昵称（含VIP标识）
│   │   ├── VIP到期时间
│   │   └── 用户ID（可复制）
│   └── 资产展示
│       ├── ❤️ 心跳值（显示总计）
│       └── 👤 已创建人物数量
├── 功能菜单
│   ├── 商业化模块
│   │   └── 💳 订阅充值
│   ├── 核心功能模块
│   │   └── 👥 我的人物
│   └── 服务与条款模块
│       ├── 📧 联系我们
│       ├── 🔒 隐私政策
│       └── 📋 使用条款
├── 退出登录按钮
└── 底部导航栏
    ├── 聊天
    ├── 联系人
    └── 我 (当前页)
```

---

## ⚙️ 功能需求详述

### 1. 用户信息卡片 (F-P-001)
**需求描述**: 展示用户完整的个人信息和资产状态
**优先级**: P0 (必须实现)

**功能细节**:

#### 1.1 头像区域
- 显示用户头像（默认表情图标）
- 右下角显示编辑图标
- 点击可触发更换头像功能

#### 1.2 基本信息
- **昵称**: 可编辑输入框
  - 默认值："梦幻小仙女"
  - 支持实时修改
  - 修改后自动保存提示
  
- **VIP会员标识**:
  - 金色渐变背景"💎 VIP会员"徽章
  - 显示在昵称标签右侧
  - 下方显示到期时间（格式：到期时间：YYYY-MM-DD）

- **用户ID**:
  - 只读显示
  - 默认值："fairy_dream_2024"
  - 右侧带"复制"按钮
  - 点击复制按钮后提示"ID已复制到剪贴板"

#### 1.3 资产展示（2个卡片）
**心跳值卡片**:
- 显示总心跳值（永久心跳值 + 今日赠送心跳值）
- 图标：❤️
- 数值格式：使用千分位分隔符
- 点击跳转到充值页面

**已创建人物卡片**:
- 显示已创建的虚拟人物数量
- 图标：👤
- 数值：实时从localStorage读取
- 仅显示，不可点击

**验收标准**:
- [x] 头像显示正确，编辑图标位置准确
- [x] VIP徽章金色渐变效果明显
- [x] 心跳值显示总计（永久+今日赠送）
- [x] 用户ID复制功能正常
- [x] 所有数值格式化正确（千分位）

---

### 2. 每日签到自动赠送 (F-P-002)
**需求描述**: 用户每日首次登录自动赠送50点心跳值
**优先级**: P0 (必须实现)

**功能细节**:
- **触发时机**: 页面加载时自动检查
- **检查逻辑**: 对比localStorage中的lastSignInDate与当前日期
- **赠送规则**:
  - 如果是今日首次登录，自动赠送50点心跳值
  - 将dailyHeartBalance设置为50
  - 更新lastSignInDate为今天日期
  - 延迟500ms后弹窗提示

**弹窗内容**:
```
🎉 每日签到成功！

恭喜您获得50点心跳值
有效期至今日24:00

快去和小伙伴聊天吧～
```

**24点清零机制**:
- 每次进入页面检查日期变化
- 如果日期改变，将dailyHeartBalance清零
- 用户下次进入时可再次领取

**验收标准**:
- [x] 每日首次进入自动弹窗
- [x] 同一天只弹窗一次
- [x] 24点后日期变化可再次领取
- [x] 赠送的心跳值正确累加到总计

---

### 3. 订阅充值入口 (F-P-003)
**需求描述**: 提供快速充值和订阅入口
**优先级**: P0 (必须实现)

**功能细节**:
- **菜单项**: "💳 订阅充值"
- **图标**: 信用卡图标
- **点击行为**: 跳转到recharge.html充值页面
- **位置**: 功能菜单第一组，单独一个模块

**验收标准**:
- [x] 图标和文字显示正确
- [x] 点击跳转到充值页面
- [x] 视觉突出，易于用户发现

---

### 4. 我的人物功能 (F-P-004)
**需求描述**: 查看和管理已创建的虚拟人物
**优先级**: P0 (必须实现)

**功能细节**:
- **菜单项**: "👥 我的人物"
- **图标**: 多人图标
- **点击行为**: 跳转到contacts.html联系人页面
- **数据同步**: 
  - 已创建人物数量从localStorage的characterList读取
  - 实时更新显示

**验收标准**:
- [x] 点击跳转到联系人页面
- [x] 人物数量准确
- [x] 与联系人列表数据一致

---

### 5. 联系我们功能 (F-P-005)
**需求描述**: 提供用户联系客服的入口
**优先级**: P1 (重要实现)

**功能细节**:
- **菜单项**: "📧 联系我们"
- **图标**: 邮件图标
- **点击行为**: 弹窗显示联系方式

**弹窗内容**:
```
联系我们

客服邮箱：support@yunyang.com
客服微信：yunyang_service
工作时间：9:00-18:00

我们会尽快回复您的问题！
```

**验收标准**:
- [x] 弹窗显示正确的联系信息
- [x] 排版清晰易读

---

### 6. 隐私政策与使用条款 (F-P-006)
**需求描述**: 展示APP的隐私政策和使用条款
**优先级**: P2 (普通实现)

**功能细节**:
- **隐私政策**: 点击弹窗提示"打开隐私政策页面"
- **使用条款**: 点击弹窗提示"打开使用条款页面"
- **位置**: 与联系我们在同一组

**验收标准**:
- [x] 点击有响应
- [x] 为后续完整实现预留入口

---

### 7. 退出登录功能 (F-P-007)
**需求描述**: 安全退出当前账号
**优先级**: P0 (必须实现)

**功能细节**:
- **按钮样式**: 粉色渐变按钮，全宽显示
- **图标**: 🚪 门图标
- **点击行为**:
  1. 弹出确认对话框："确定要退出登录吗？"
  2. 用户确认后：
     - 清除localStorage中的userToken
     - 清除localStorage中的userInfo
     - 跳转到login.html登录页面

**验收标准**:
- [x] 有二次确认
- [x] 成功清除用户数据
- [x] 跳转到登录页面

---

### 8. 底部导航栏 (F-P-008)
**需求描述**: 提供主要页面间的快速切换
**优先级**: P0 (必须实现)

**功能细节**:
- **导航项**:
  1. 聊天 - 点击跳转homepage.html
  2. 联系人 - 点击跳转contacts.html
  3. 我 - 当前页面，高亮显示

- **视觉反馈**:
  - 当前页图标和文字为深紫色
  - 其他页面为灰色
  - 点击有响应动画

**验收标准**:
- [x] 当前页高亮正确
- [x] 跳转功能正常
- [x] 与其他页面导航栏一致

---

## 💾 数据存储方案

### localStorage数据结构
```javascript
{
  // 用户基本信息
  userToken: "xxx",                    // 用户登录token
  userInfo: {...},                      // 用户详细信息
  
  // 资产信息
  heartBalance: 2350,                   // 永久心跳值
  dailyHeartBalance: 50,                // 每日赠送心跳值（24点清零）
  characterCount: 5,                    // 已创建人物数量
  createQuota: 10,                      // 剩余创建额度
  
  // 人物列表
  characterList: [                      // 已创建的人物列表
    {
      id: "alice_001",
      name: "小仙女Alice",
      avatar: "A",
      createTime: "2025-10-16T..."
    }
  ],
  
  // 签到记录
  lastSignInDate: "Wed Oct 16 2025",   // 上次签到日期（用于判断是否新的一天）
}
```

---

## 🎨 UI/UX设计要求

### 视觉风格
- **整体风格**: 梦女风格，柔和舒适
- **主色调**: 渐变粉紫色背景（#f0e5ff → #d9c6e0）
- **强调色**: 粉红色渐变（#ff9a9e → #fecfef）
- **卡片**: 白色半透明毛玻璃效果

### 交互设计
- **点击反馈**: 菜单项点击变色
- **动画效果**: 按钮点击有下压效果
- **加载体验**: 页面加载后延迟500ms弹窗，避免突兀

### 响应式设计
- **桌面端**: iPhone 16尺寸模拟器（393×852px）
- **移动端**: 自适应全屏，移除iPhone边框

---

## 🔄 页面流程

### 用户进入流程
```
用户点击底部"我" Tab
    ↓
加载profile.html
    ↓
检查是否今日首次登录
    ↓
是 → 自动赠送50心跳值 + 弹窗提示
    ↓
否 → 直接显示页面
    ↓
显示用户信息和资产
```

### 充值流程
```
点击"订阅充值"或心跳值卡片
    ↓
跳转到recharge.html
    ↓
选择套餐并支付
    ↓
充值成功
    ↓
返回profile.html
    ↓
余额自动更新
```

---

## ✅ 验收标准总览

### 功能完整性
- [x] 用户信息展示完整准确
- [x] VIP会员状态显示正确
- [x] 心跳值显示总计（永久+今日赠送）
- [x] 每日自动签到功能正常
- [x] 订阅充值入口可跳转
- [x] 我的人物跳转到联系人页面
- [x] 退出登录清除数据

### 数据准确性
- [x] 心跳值实时同步显示
- [x] 人物数量与列表一致
- [x] 每日赠送24点清零
- [x] 优先消耗每日赠送心跳值

### 用户体验
- [x] 页面加载流畅
- [x] 每日签到弹窗时机合理
- [x] 点击反馈及时
- [x] 导航流畅无卡顿

---

## 🚀 后续迭代计划

### v2.1 计划功能
- [ ] 个性签名编辑
- [ ] 更换头像功能完善（上传图片）
- [ ] 消费记录查询
- [ ] VIP特权展示页面

### v2.2 计划功能
- [ ] 成就系统
- [ ] 签到日历
- [ ] 好友邀请
- [ ] 分享功能

---

## 📝 变更记录

### v2.0 (2025-10-16)
- 添加心跳值余额显示（总计）
- 添加每日自动签到功能
- 添加订阅充值入口
- 添加我的人物功能（跳转联系人）
- 添加联系我们功能
- 移除账号安全功能
- 移除消息设置功能
- 移除关于我们功能
- 移除帮助与反馈功能
- 优化VIP会员状态展示
- 优化资产卡片布局（3个→2个）

### v1.0 (2025-08-24)
- 初始版本
- 基础个人信息展示
- 基础设置菜单
